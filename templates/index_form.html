<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
        crossorigin="anonymous"
    >
    <link rel="stylesheet" href="{{ url_for('static',    filename='css/style_form.css') }}">
    <title>成大車位預約-停車位預約結果</title>
</head>
<body>
    <main>
        <!--NAV-->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" >
            <div class="container-fluid">
            <a class="navbar-brand" href="">Group5 成大預約停車系統</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" onclick="go_P2()">主頁</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="go_P3()">查看所剩車位</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="go_P4()">預約車位</a>
                </li>
                </ul>
            </div>
            </div>
        </nav>
    <!--本體-->
        <div id="outside">
            <section class="title">
                <h1 style="margin: 0; color: white; background-color: #25528f">車位預約結果</h1>
            
            </section>
            <div style="padding: 2%; ">
                <div id="index_form_name" >
                    <div id="name_display" style="float: left;">帳號 : </div>
                    <div id="name_get" style="float: left; margin-left: 1%;"></div>
                </div>
                <br>
                <div style="padding-top: 1%;">  
                    <div id="name_display" style="float: left;">密碼 : </div>
                    <div id="password_get" style="float: left;"></div>
                </div>
                <br>
                <div  style="padding-top: 1%;">
                    <div id="name_display" style="float: left;">車牌 : </div>
                    <div id="car_get" style="float: left;"></div>
                </div>
                <br>
                <div  style="padding-top: 1%;">
                    <div id="name_display" style="float: left;">停車場 : </div>
                    <div id="park_get" style="float: left;"></div>
                </div>
                <br>
                <div  style="padding-top: 1%;">
                    <div id="name_display" style="float: left;">預約時間 :</div>
                    <div id="date_get" style="float: left;"></div>
                </div>
                <br>
                <div id="cancel_buttton">取消預約</div>
            </div>
        </div>
    </main>
</body>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.js"></script>
<script type="text/javascript" charset="utf-8">
    //查看所所填入之資料
    function go_P2(){
        var getUrlString = location.href;
        var url = new URL(getUrlString);
        user_id = url.searchParams.get('user_id');
        window.location.href="index_P2.html?user_id=" + user_id
    }
    //查看 停車場所剩下之資料
    function go_P3(){
        var getUrlString = location.href;
        var url = new URL(getUrlString);
        user_id = url.searchParams.get('user_id');
        window.location.href="index_P3.html?user_id=" + user_id
    }
    //預約停車場
    function go_P4(){
        var getUrlString = location.href;
        var url = new URL(getUrlString);
        user_id = url.searchParams.get('user_id');
        window.location.href="index_P4.html?user_id=" + user_id
    }
    //載入個人所填寫之資料
    window.onload = function(){
        var getUrlString = location.href;
        var url = new URL(getUrlString);
        select_user_id = url.searchParams.get('user_id');
        //檢查是否有填寫過停車位
        //如果沒有 則在mid.py填寫
        //如果有 則警示 "請先取消停車位"
        a_basic = $.ajax({
                url:"/static/information.json",
                type:"GET",
                dataType:"json",
                async:false,
            });
        //取得Json檔
        //將string轉換成Object
        result_park=$.parseJSON(a_basic.responseText)
        console.log(result_park)
        check_user_exist = 0 //帳號密碼正確
        for(i=0;i<result_park.length;i++){
            if(select_user_id == result_park[i]["user_id"]){
                //若已經有寫過資料
                check_user_exist = 1
                json_number = i
            }
        }
        if (check_user_exist == 0){ //使用者不存在
            alert("請重新登入");
        }
        //將使用者所填入資料放入 顯示表單
        console.log(result_park[json_number]["user_select_park"])
        document.getElementById("name_get").innerHTML = String(result_park[json_number]["user_id"])
        document.getElementById("password_get").innerHTML = String(result_park[json_number]["user_password"])
        document.getElementById("car_get").innerHTML = String(result_park[json_number]["user_car"])
        document.getElementById("park_get").innerHTML = String(result_park[json_number]["user_select_park"])
        document.getElementById("date_get").innerHTML = String(result_park[json_number]["user_park_date"])
    }
</script>
</html>