<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>成大停車系統-登入頁面</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sign-in/">
    <!-- Bootstrap core CSS -->
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="{{ url_for('static',    filename='css/style_signin.css') }}">
  </head>
  <body class="text-center">
      <main class="form-signin">
        <form>
          <img class="mb-4" src="/static/picture/moto.png" alt="" width="200" height="200">
          <h1 class="h3 mb-3 fw-normal">Please sign in</h1>

          <div class="form-floating">
            <input  required class="form-control" id="floatingInput" placeholder="name@example.com" >
            <label for="floatingInput">Email address</label>
          </div>
          <div class="form-floating">
            <input required type="password" class="form-control" id="floatingPassword" placeholder="Password" >
            <label for="floatingPassword">Password</label>
          </div>

          <div class="checkbox mb-3">
            <label>
              <input type="checkbox" value="remember-me"> Remember me
            </label>
          </div>
          <div class="w-100 btn btn-lg btn-primary" onclick="go_P2()">Sign in</div>
          <p class="mt-5 mb-3 text-muted">&copy; 2022</p>
        </form>
        <!--<div onclick="go_P2()" style="border: 1px solid #000;">P2</div>-->
    </main>
    
  <!-- JavaScript Bundle with Popper -->
    
  </body>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.js"></script>
    <script type="text/javascript" charset="utf-8">
      function go_P2(){
          //先從 information.json裡免找 是否有使用者
          var getUrlString = location.href;
          var url = new URL(getUrlString);
          select_user_id = document.getElementById("floatingInput").value;
          select_user_password = document.getElementById("floatingPassword").value;
          //檢查是否有填寫過停車位
          //如果沒有 則在mid.py填寫
          //如果有 則警示 "請先取消停車位"
          a_basic = $.ajax({
                  url:"/static/information.json",
                  type:"GET",
                  dataType:"json",
                  async:false,
              });
          //取得Json檔
          //將string轉換成Object
          result_park=$.parseJSON(a_basic.responseText)
          console.log(result_park)
          check_user_exist = 0 //帳號密碼正確
          //確認帳號密碼是否正確
          for(i=0;i<result_park.length;i++){
              if(select_user_id == result_park[i]["user_id"]){
                if(select_user_password == result_park[i]["user_password"]){
                  //帳號密碼正確
                  check_user_exist = 1
                }
              }
          }
          //若不存在使用者 則警示 重新登入
          if (check_user_exist == 0){ //使用者不存在
              alert("帳號密碼不存在或不正確 請重新輸入");
          }
          //若存在使用者 則登入
          else{
            window.location.href="index_P2.html?user_id=" + document.getElementById("floatingInput").value
          }
      }
    </script>
</html>
